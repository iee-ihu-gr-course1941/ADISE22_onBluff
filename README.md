# ADISE22_onBluff

Table of Contents
=================
   * [Εγκατάσταση](#εγκατάσταση)
      * [Απαιτήσεις](#απαιτήσεις)
      * [Συντελεστές](#συντελεστές)
      * [Οδηγίες Εγκατάστασης](#οδηγίες-εγκατάστασης)
   * [Περιγραφή παιχνιδιού](#περιγραφή-παιχνιδιού)   
   * [Περιγραφή API](#περιγραφή-api)
      * [Methods](#methods)
        * [Card](#card)
        * [GameTable](#GameTable)
        * [Players](#player)
        * [GameCondition](#gamecondition)
        * [CheckBluff](#checkbluff)          
    * [Entities](#entities)
        * [game_board](#game_board)
        * [players](#players)
        * [game_status](#game_status)
          



# Εγκατάσταση

## Απαιτήσεις

* Apache2
* Mysql Server
* php
* html
* javascript
* css

## Συντελεστές

* Αθανάσιος Χρήστου

## Οδηγίες Εγκατάστασης

 * Κάντε clone το project σε κάποιον φάκελο <br/>
  `$ git clone https://github.com/iee-ihu-gr-course1941/ADISE22_onBluff`

 * Βεβαιωθείτε ότι ο φάκελος είναι προσβάσιμος από τον Apache Server. Πιθανόν να χρειαστεί να καθορίσετε τις παρακάτω ρυθμίσεις.

 * Θα πρέπει να δημιουργήσετε στην Mysql την βάση με όνομα 'bluff' και να φορτώσετε σε αυτήν την βάση τα δεδομένα από το αρχείο onbluff_final.sql

 * Θα πρέπει να φτιάξετε το αρχείο lib/db_upass.php το οποίο να περιέχει:
```
    <?php
	$DB_PASS = 'κωδικός';
	$DB_USER = 'όνομα χρήστη';
    ?>
``` 

# Περιγραφή Παιχνιδιού
Αριθμός παικτών: 2

Στόχος του κάθε παίκτη είναι να ξεφορτωθεί όλες του τις κάρτες από το χέρι του. Ο πρώτος που θα καταφέρει να αρχίσει
το γύρο του χωρίς κάρτες νικάει.

Στο γύρο του ο παίκτης επιλέγει από το χέρι του μία κάρτα και την τοποθετεί ανάποδα στο τραπέζι. Ταυτόχρονα 
αναφέρει στους αντιπάλους ότι η κάρτα που έπαιξε έιναι ο συγκεκριμένος αριθμός ή φιγούρα και τους λέει και ποιός είναι.
Όμως δεν χρειάζεται να πει την αλήθεια, μπόρει να μπλοφάρει. Ο αντίπαλος παίκτης μπορεί είτε να πει "Μπλόφα" ή να συνεχίσει
παίζοντας με τη σείρα του και αυτός κάρτες από το χέρι του που είναι ιδιός αριθμός/φιγούρα κάνοντας ή όχι μπλόφα.

Εάν κάποιος πεί "Μπλόφα", τότε γυρνάνε οι κάρτες που έπαιξε ο τελευταίος παίκτης ώστε να είναι φανερά σε όλους. Εάν
όντως μπλόφαρε, τότε παίρνει στο χέρι του όλες τις κάρτες από το ταμπλό. Αλλιώς, άμα οι κάρτες που έπαιξε είναι αυτό
που είπε, τότε αυτός που ανακάλεσε "Μπλόφα" παίρνει τις κάρτες από το ταμπλό στο χέρι του.




# Περιγραφή API

## Methods

### Game Board

#### Εμφάνιση τραπεζιού

```
GET /game_board/
```
 
Εμφανίζει τις κάρτες που έχουν παιχτεί ήδη και βρίσκονται στο τραπέζι

#### Καταγραφή νέου παίκτη

```
PUT /players/A
```
Εγγράφει σε μία κενή θέση έναν νέο παίκτη. Η πλευρά που θα παίξει επιλέγεται από τον παίκτη και
σε περίπτωση που είναι γεμάτη τον ενημερώνει ώστε να αλλάξει. Το username του παίκτη βρίσκεται στο body του request.
 
| Field             | Description                 | Required   |
| ----------------- | --------------------------- | ---------- |
| `username`        | Το username για τον παίκτη. | yes        |

### Game Status

#### Εμφάνιση κατάστασης παιχνιδιού

```
GET /status/
```

Εμφανίζει την τρέχουσα κατάσταση του παιχνιδιού μαζί με τον παίκτη του οποίου η σιερά είναι να παίξει.
Επίσης εμφανίζει την ημερομηνία και ώρα που έγινε η τελευταία αλλαγή στο παιχνίδι.

#### Εμφάνιση παικτών

```
GET /players/A
```

Εμφανίζει τα στοιχεία και την θέση του επιλεγμένου παίκτη είτε βρίσκεται στην πλευρά Α είτε Β.

#### Κατάθεση τραπουλόχαρτου στο τραπέζι 

```
PUT /game_board/card/:username/:id
```

| Field             | Description                             | Required   |
| ----------------- | ----------------------------------------| ---------- |
| `username`        | Το username του παίκτη.                 | yes        |
| `id`              | Το id της επιλεγμένης προς ρίψη κάρτας. | yes        |

Η επιλεγμένη κάρτα θα φύγει από τον πίνακα του χεριού του παίκτη και θα εισαχθεί στο game board.

#### Μπλόφα

```
PUT /game_board/bluff/:username
```
| Field             | Description                             | Required   |
| ----------------- | ----------------------------------------| ---------- |
| `username`        | Το username του παίκτη.                 | yes        |

Σε περίπτωση που ένας παίκτης αναγνωρίσει ή όχι μία μπλόφα η συγκεκριμένη κλήση του API επιστρέφει όλες τις κάρτες
που βρίσκονται στο τραπέζι, στο χέρι του επιλεγμένου παίκτη.

#### Εμφάνιση χεριού ενός παίκτη

```
GET /hands/A
```

Επιστρέφει το χέρι του παίκτη Α


## Entities

### game_board
---------
Ο game_board είναι ένας πίνακας, ο οποίος περιέχει όλες τις κάρτες που "πετάνε" οι παίκτες 
κατά την διάρκεια του παιχνιδιού. Κάθε γραμμή του αποτελεί μία ρίψη.


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `id`                     | Ο μοναδικός κωδικός της κάρτας               |  '1,2,3...52'                       |
| `value_tinyinit`         | Ο αριθμός της κάρτας                         |  '1','2','3','4','5','6','7','8',   |
|                          |                                              |  '9','10','11','12','13'            |
| `value_text`             | Ο αριθμός/φιγούρα της κάρτα σε text          |  'one,two,...,queen etc.'           |
| `value_symbol`           | Ο αριθμός/φιγούρα της κάρτα σε σύμβολο       |  '1,2,3,...,Κ,Q etc.'               |
| `img`                    | path για την εμφάνιση των καρτών             |  './img/2.png, etc'                 |
| `suit_text`              | To σύμβολο της κάρτας                        |  'hearts, diamonds, clubs, spades'  |
| `suit_color`             | To χρώμα της κάρτας                          |  'black, red'                       |
| `played_by`              | To username του παίκτη που έπαιξε την κάρτα  |  'username'                         |
| `turn_name`              | Η θέση από την οποία παίχτηκε η κάρτα        |  'Α,Β'                              |


### players
-----------

O κάθε παίκτης έχει τα παρακάτω στοιχεία:

| Attribute                | Description                                   | Values                              |
| ------------------------ | --------------------------------------------- | ----------------------------------- |
| `username`               | Όνομα παίκτη                                  | String                              |
| `token`                  | Μοναδικός αριθμός αναγνώρισης παίκτη          | Varchar                             |
| `turn_name`              | Την πλευρά από την οποία παίζει ο παίκτης     | 'A, B'                              |
| `last_action`            | Η ημερομηνία και ώρα που έπαιξε τελευταία φορά| Current_timestamp                   |


### game_status
------------------

Πίνακας με την κατάσταση του παιχνιδιού

| Attribute                | Description                                      | Values                              |
| ------------------------ | ------------------------------------------------ | ----------------------------------- |
| `status`                 | Η κατάσταση του παιχνιδιού                       | 'STARTED','ENDED','ABORTED'         |
| `p_turn`                 | Ο παίκτης ο οποίος πάιζει αυτό το γύρο           | Integer                             |
| `result`                 | Δείχνει το αποτέλεσμα του παιχνιδιού             | String                              |
| `last_change`            | Η ημερομηνία και ώρα που έγινε η τελευταία αλλαγή| Current_timestamp                   |



### hands
---------------

Πίνακας που περιέχει όλες τις κάρτες τις οποίες κρατάνε οι παίκτες στα χέρια τους

| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `id`                     | Ο μοναδικός κωδικός της κάρτας               |  '1,2,3...52'                       |
| `value_tinyinit`         | Ο αριθμός της κάρτας                         |  '1','2','3','4','5','6','7','8',   |
|                          |                                              |  '9','10','11','12','13'            |
| `value_text`             | Ο αριθμός/φιγούρα της κάρτα σε text          |  'one,two,...,queen etc.'           |
| `value_symbol`           | Ο αριθμός/φιγούρα της κάρτα σε σύμβολο       |  '1,2,3,...,Κ,Q etc.'               |
| `img`                    | path για την εμφάνιση των καρτών             |  './img/2.png, etc'                 |
| `suit_text`              | To σύμβολο της κάρτας                        |  'hearts, diamonds, clubs, spades'  |
| `suit_color`             | To χρώμα της κάρτας                          |  'black, red'                       |
| `player_us`              | To username του παίκτη που κρατάει την κάρτα |  'username'                         |
| `turn_name`              | Η θέση στην οποία βρίσκεται αυτή η κάρτα     |  'Α,Β'                              |



